<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{/layout/listLayout.html :: setContent(~{this::content} )}">
    <th:block th:fragment="content">


        <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/sign-in/">


        <!-- Custom styles for this template -->
        <body class="text-center">

        <div class="form-signin w-100 m-auto">

            <div class="form-group">
                <label>Email</label>
                <input type="text" class="form-control" name="Email" th:value="${dto.getEmail}" readonly>
            </div>

            <div class="form-group">
                <label>Name</label>
                <input type="text" class="form-control" name="Name" th:value="${dto.getName}" readonly>
            </div>
            <div class="form-group">
                <label>Phone</label>
                <input type="text" class="form-control" name="Phone" th:value="${dto.getPhone}" readonly>
            </div>
            <div class="form-group">
                <label>Address</label>
                <input type="text" class="form-control" name="Address" th:value="${dto.getAddress}" readonly>
            </div>


            <a th:href="@{/member/modify/{id}(id=${dto.getId})}"><button class="btn-outline-secondary" type="button">회원 정보 변경</button></a>


        </div>

        <form class="form-group" id="memberRoleForm">
            <select id="memberRoleSelect" name="memberRoleSelect">
                <th:block th:each="memberRole : ${memberRoles}">
                    <option th:value="${memberRole.getValue()}" th:text="${memberRole.name()}"></option>
                </th:block>
            </select>
            <a th:href="@{/member/memberRoleRequest/{memberId}(memberId=${dto.id}, memberRole=${memberRoleSelect})}" th:method="get"><button class="btn-outline-secondary" type="submit">권한 요청</button></a>
        </form>


        <style>


            .nav-scroller .nav {
                display: flex;
                flex-wrap: nowrap;
                padding-bottom: 1rem;
                margin-top: -1px;
                overflow-x: auto;
                text-align: center;
                white-space: nowrap;
                -webkit-overflow-scrolling: touch;
            }


            .form-signin {
                max-width: 330px;
                padding: 15px;
            }

            .form-signin .form-floating:focus-within {
                z-index: 2;
            }

            .form-signin input[type="email"] {
                margin-bottom: -1px;
                border-bottom-right-radius: 0;
                border-bottom-left-radius: 0;
            }

            .form-signin input[type="password"] {
                margin-bottom: 10px;
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }

        </style>
        <script>
            $(document).ready(function (e) {
                $(".btn-primary").on("click", function (e) {
                    e.preventDefault();
                    $("form").submit();
                });
            });

            $('#memberRoleForm').submit(function(event) {
                event.preventDefault();

                var memberId = $(this).data('member-id');
                var role = $('#memberRoleSelect').val();

                $.ajax({
                    url: '/member/memberRoleRequest/' + memberId,
                    type: 'GET',
                    data: {
                        memberRole: role
                    },
                    success: function(response) {
                        // 처리 결과에 따라 적절한 작업 수행
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
        </script>

        </body>
    </th:block>
</th:block>
</html>
